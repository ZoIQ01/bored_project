{% extends "activities/base.html" %}

{% block title %}Import activities{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-12 col-lg-8">
        <div class="card shadow-sm">
            <div class="card-body">
                <h1 class="h4 mb-3">Import activities</h1>

                <form method="post" class="row g-3 align-items-end">
                        {% csrf_token %}
                        <div class="col-12 col-md-6">
                            <label for="{{ form.count.id_for_label }}" class="form-label">{{ form.count.label|capfirst }}?</label>
                            {{ form.count }}
                            {% if form.count.errors %}
                                <div class="text-danger small mt-1">{{ form.count.errors|join:', ' }}</div>
                            {% endif %}
                        </div>
                        <div class="col-12 col-md-auto">
                            <button type="submit" class="btn btn-primary">Import</button>
                        </div>
                </form>

                {% if count %}
                <p class="text-secondary mt-3 mb-0">You entered: <strong>{{ count }}</strong></p>
                {% endif %}

                {% if added is not None %}
                    <div class="alert alert-success mt-3 mb-0" role="alert">
                        <strong>Added:</strong> {{ added }} &nbsp;|&nbsp; <strong>Skipped:</strong> {{ skipped }}
                    </div>
                {% endif %}

                {% if timeout_reached %}
                    <div class="alert alert-warning mt-3 mb-0" role="alert">
                        Import stopped early due to a timeout.
                        {% if attempted %}<strong>Attempted:</strong> {{ attempted }}{% endif %}
                        {% if count %}&nbsp;|&nbsp;<strong>Requested:</strong> {{ count }}{% endif %}
                        {% if timeout_seconds %}&nbsp;|&nbsp;<strong>Timeout:</strong> {{ timeout_seconds }}s{% endif %}
                    </div>
                {% endif %}

                <p class="mt-3 mb-0"><strong>Total activities in database:</strong> {{ total }}</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}